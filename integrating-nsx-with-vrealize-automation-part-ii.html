
<!DOCTYPE html>
<html lang="en-US">
<!-- Including the Head tag and metadata -->



<head><meta name="generator" content="Hexo 3.8.0">
  <!--Meta-->
    <meta charset="UTF-8">
    <title>Integrating NSX with vRealize Automation-Part II-Anything Virtual and Cloudy</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=5.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Here you will find posts on various VMware and other technologies including but not limited to vRealize Suite, NSX, VSAN, PowerCLI, Python, and DevOps. A special focus is on vRA, vROps and vRO">
    <meta name="author" content="Sajal Debnath">
    <link rel="icon" href="/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/clr-ui.min.css">
    <style>
      .responsive {
        max-width: 100%;
        height: auto;
      }
      .video-container {
        position: relative;
        padding-bottom: 56.25%;
        padding-top: 30px; height: 0; overflow: hidden;
      }
      .video-container iframe,
      .video-container object,
      .video-container embed {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


<body>
<!--  <main> body starts from here-->
  <clr-main-container class="main-container">
    <!-- Blog Header Navigation and Subnav menus -->
    
<!-- <header class="header header-4"> -->

<clr-header class="header-6 header">
  <!---->
  <button class="header-hamburger-trigger" type="button" aria-label="HeaderMenu">
    <span></span>
  </button>
  <div class="branding">
      <a class="logo-and-title" href="/">
          <span><img src="/images/Logo.png" alt="Logo" width="36" height="36"></span>
          <span class="title">Anything Virtual and Cloudy</span>
      </a>
  </div>
  <div class="divider"></div>
  <ul class="header-nav list-unstyled clr-nav-level-1">
    <li class="nav-item">
      <a href="/" class="nav-link nav-text">Home</a>
    </li>
      <!---->
      <li class="nav-item">
        <a href="/about/" class="nav-link nav-text">About</a>
      </li>
        <!---->
      <li class="nav-item">
        <a href="/contact/" class="nav-link nav-text">Contact</a>
      </li><li>
      </li><li class="nav-item">
        <a href="/archives/" class="nav-link nav-text">Archives</a>
      </li><li>
  </li></ul>
  <form class="search" action="https://sajaldebnath.github.io/search">
        <label for="search_input">
            <input id="search_input" name="q" type="text" placeholder="Search in the blog">
        </label>
  </form>

</clr-header>


    <!-- Content container starts from here-->
    <!-- Dividing the content area into two different part. First part will Show
      Post and Page related information. Right side will have widgets -->
      

<div class="content-container">
  <div class="content-area">
    <div class="clr-row clr-align-items-start">
      <div class="clr-col-xs-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-12 clr-col-xl-3">
        <!-- Left side space -->
      </div>
      <div class="clr-col-xs-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-12 clr-col-xl-6">
        <div class="card">
   <div class="card-header">
      <h3 class="card-title">
        <div class="clr-row clr-align-items-start">
          <div class="clr-col-xs-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-9 clr-col-xl-9">
            Integrating NSX with vRealize Automation-Part II
          </div>
          <!-- Right Side Space -->
          <div class="clr-col-xs-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-3 clr-col-xl-3 clr-justify-content-end">
            <img border="0" alt="Home" src="/share-solid.svg" width="18" height="18">
<a class="card-link" href="http://www.facebook.com/sharer.php?u=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Facebook" src="/facebook.svg" width="18" height="18">
</a>
<a class="card-link" href="http://www.linkedin.com/shareArticle?mini=true&url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="LinkedIn" src="/linkedin.svg" width="18" height="18">
</a>
<a class="card-link" href="http://twitter.com/intent/tweet?text=An%20intersting%20blog&url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Twitter" src="/twitter.svg" width="18" height="18">
</a>
<a class="card-link" href="https://plus.google.com/share?url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Goolge+" src="/google-plus.svg" width="18" height="18">
</a>

            &emsp;
            <a href="/"><img border="0" alt="Home" src="/home-solid.svg" width="18" height="18"></a>
          </div>
        </div>
      </h3>
   </div>
   <div class="card-block">
     
        


Related Categories: <a href="/categories/Virtualization-Cloud/">#Virtualization & Cloud</a> <a href="/categories/Virtualization-Cloud/Automation/">#Automation</a> &nbsp &nbsp &nbsp &nbsp <img border="0" alt="Info-Standard" src="/calendar-line.svg" width="18" height="18"> 2016-11-05



     
   <div class="card-text">
         <!-- Content -->
      <h4 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a>Purpose</h4><p>Dear Readers, this is the second and last part of the series on integrating NSX with vRealize Automation. Initially I thought of writing three separate blogs on this topic covering Integration, Consumption and Result. But then due to the size I decided to put a video and few screenshots. This reduced the size to a great extent and hence I will club part II and III in this post.<br><a id="more"></a><br> In this post I am going to cover the after integration parts. That is, how to consume NSX entities in vRealize Automation Blueprints and then show the end result.</p>
<h4 id="Pre-Requisites"><a href="#Pre-Requisites" class="headerlink" title="Pre-Requisites:"></a>Pre-Requisites:</h4><p>As mentioned in the [first part]<a href="/integrating-nsx-with-vrealize-automation-part-i.html" title="Integrating NSX with vRealize Automation-Part I">Integrating NSX with vRealize Automation-Part I</a>, before you can use the NSX entities, you need to configure and use them in the reservation. So first you need to configure network profile and then in Reservation map those profiles to the portgroups created and exposed by NSX. Note: The Logical Switch you create in NSX will be exposed and listed as a portgroup here in vRA (at the end of the day, those logical switches are portgroups created in dvSwitch). Also note, the security policies created in NSX will be available in reservation tab. So the security profiles you want to use in a Business Group needs to be selected in Reservation tab. Once selected, they will be available to be consumed in Blueprints. Once the above is done we will further go ahead and use those entities in Blueprint.</p>
<h4 id="Configuring-the-vRA-Blueprint-with-NSX"><a href="#Configuring-the-vRA-Blueprint-with-NSX" class="headerlink" title="Configuring the vRA Blueprint with NSX"></a>Configuring the vRA Blueprint with NSX</h4><p>For this example the following scenario is taken:</p>
<ul>
<li>This is a multi-tier blueprint with Web, App and DB components in it</li>
<li>The Web and App tier will multiple machines in cluster so that they can scale when needed</li>
<li>The Web tier will use a Dynamic Load balancer. So whenever an instance is deployed from this Blueprint, a load balancer will be deployed for this</li>
<li>All the VM’s created from this blueprint will be under activity monitoring security policy.</li>
<li>SSH port will be automatically blocked to all the VM’s through Block-SSH security policy.</li>
</ul>
<p>The below video shows the steps to create the blueprint and use NSX entities. It also covers publishing, entitlement and “Request for Catalog item” as well.</p>
<h4 id="Steps-Used-for-Configuration"><a href="#Steps-Used-for-Configuration" class="headerlink" title="Steps Used for Configuration:"></a>Steps Used for Configuration:</h4><ul>
<li>Create a New Blueprint, use NSX settings</li>
<li>In the designer form use 3 vSphere Machines (one for each category)</li>
<li>Make subsequent modification in each of them (used clone and linked clone methods of create a VM)</li>
<li>Added network and configured them</li>
<li>Added security policies and configured them</li>
<li>Added load balancer and made required configuration</li>
<li>Publish the blueprint, entitle it and then from Catalog consume the entity</li>
</ul>
<div class="video-container"><iframe src="//www.youtube.com/embed/GomHcNx2-04" frameborder="0" allowfullscreen></iframe></div>
<h4 id="Result-of-NSX-Integration"><a href="#Result-of-NSX-Integration" class="headerlink" title="Result of NSX Integration:"></a>Result of NSX Integration:</h4><p>Provided below are the screenshots from the deployment stage. For example I have taken a Multi-Machine blueprint named Multimachine-Web. It has the same configuration as that of the above example. To request for the item go to Catalog and click on Request. </p>
<p><img src="/images/2016/11/result-1.jpg" alt="NSX - 1" class="responsive"></p>
<p>Click on Submit to request for the item. </p>
<p><img src="/images/2016/11/result-2.jpg" alt="NSX - 2" class="responsive"></p>
<p>The request is successfully submitted. </p>
<p><img src="/images/2016/11/result-3.jpg" alt="NSX - 3" class="responsive"></p>
<p>Go to Requests tab to check for the request. Click on the request number to get more details. </p>
<p><img src="/images/2016/11/result-5.jpg" alt="NSX - 5" class="responsive"></p>
<p>Click on “Execution Information” to get detailed step by step execution information. </p>
<p><img src="/images/2016/11/result-6.jpg" alt="NSX - 6" class="responsive"></p>
<p>In details information you can check completed, pending and failed (if any) steps. </p>
<p><img src="/images/2016/11/result-7.jpg" alt="NSX - 7" class="responsive"></p>
<p><img src="/images/2016/11/result-8.jpg" alt="NSX - 8" class="responsive"></p>
<p>At the backend, in vCenter we can get the new entities that are being created. </p>
<p><img src="/images/2016/11/result-8.1.jpg" alt="result - 8-1" class="responsive"></p>
<p>The job successfully completed. </p>
<p><img src="/images/2016/11/result-9.jpg" alt="result - 9" class="responsive"></p>
<p>Let’s check the details of a VM </p>
<p><img src="/images/2016/11/result-14.jpg" alt="result - 14" class="responsive"></p>
<p>This is the Web component, it automatically got two IP’s   </p>
<p><img src="/images/2016/11/result-16.jpg" alt="result - 16" class="responsive"></p>
<p>Details of On-demand load balancer. </p>
<p><img src="/images/2016/11/result-17.jpg" alt="result - 17" class="responsive"></p>
<p>Here we can see that the created VM is connected to the respective Logical Switch. </p>
<p><img src="/images/2016/11/result-18.jpg" alt="result - 18" class="responsive"></p>
<p>A separate logical switch has been created for On-Demand routed network. </p>
<p><img src="/images/2016/11/result-19.jpg" alt="result - 19" class="responsive"></p>
<p>A new edge gateway has been created for On-Demand Load Balancer. </p>
<p><img src="/images/2016/11/result-20.jpg" alt="result - 20" class="responsive"></p>
<p>The parameters for monitoring on Edge. </p>
<p><img src="/images/2016/11/result-21.jpg" alt="result - 21" class="responsive"></p>
<p>The load balancer is automatically configured. </p>
<p><img src="/images/2016/11/result-22.jpg" alt="result - 22" class="responsive"></p>
<p>Pools are configured in Load Balancer. </p>
<p><img src="/images/2016/11/result-23.jpg" alt="result - 23" class="responsive"></p>
<p>Virtual Servers are configured with IP </p>
<p><img src="/images/2016/11/result-24.jpg" alt="result - 24" class="responsive"></p>
<p>Created VM’s are automatically added to the security Policies. </p>
<p><img src="/images/2016/11/result-1.1.jpg" alt="result - 1-1" class="responsive"></p>
<p>This concludes this series for NSX integration with vRealize Automation and consumption of NSX provided entities using vRA blueprint.</p>

   </div>
  </div>
     <div class="card-footer">
       <div class="clr-row clr-align-items-start">
         <div class="clr-col-xs-11 clr-col-sm-11 clr-col-md-11 clr-col-lg-11 clr-col-xl-11">
           <b>Share: &emsp; </b>
<a class="card-link" href="http://www.facebook.com/sharer.php?u=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Facebook" src="/facebook.svg" width="25" height="25">
</a>
<a class="card-link" href="http://www.linkedin.com/shareArticle?mini=true&url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="LinkedIn" src="/linkedin.svg" width="25" height="25">
</a>
<a class="card-link" href="http://twitter.com/intent/tweet?text=An%20intersting%20blog&url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Twitter" src="/twitter.svg" width="25" height="25">
</a>
<a class="card-link" href="https://plus.google.com/share?url=https://sajaldebnath.com/integrating-nsx-with-vrealize-automation-part-ii.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Goolge+" src="/google-plus.svg" width="25" height="25">
</a>

         </div>
         <!-- Right Side Space -->
         <div class="clr-col-xs-1 clr-col-sm-1 clr-col-md-1 clr-col-lg-1 clr-col-xl-1 clr-justify-content-end">
           <a href="/"><img border="0" alt="Home" src="/home-solid.svg" width="18" height="18"></a>
         </div>
       </div>
     </div>
</div>
<!-- Comments Section -->

<section class="comments">
  <div class="card">
    <div class="card-header">
      <b>Comments</b>
    </div>
    <div class="card-block">
      <div class="card-text">
        
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>


      </div>
    </div>
  </div>
</section>


      </div>
      <!-- Right Side Space -->
      <div class="clr-col-xs-12 clr-col-sm-12 clr-col-md-12 clr-col-lg-12 clr-col-xl-3">
      </div>
  </div>
</div>
</div>


  </clr-main-container>

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84051711-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84051711-1');
  gtag('set', {'user_id': 'UA-84051711-1'}); // Set the user ID using signed-in user_id.
</script>

  <!-- Including the Scripts Area -->
  <script src="/js/jquery-3.3.1.slim.min.js" async></script>
  <script>window.jQuery || document.write('<script src="/js/jquery-3.3.1.slim.min.js"><\/script>')</script>

  <noscript>
    Sorry...JavaScript is needed to go ahead.
  </noscript>

  <!-- Defining the scripts -->
  <script type="text/javascript">

    // Handling the main header menubar options in Responsive mode
    $(".header-hamburger-trigger").on('click',function(){
      if($(".main-container").hasClass("open-hamburger-menu")){
        $(".main-container").removeClass("open-hamburger-menu");
      }else{
      $(".main-container").addClass("open-hamburger-menu");
    }
    });

    // Handling the Subnav menubar options in Responsive mode
     $(".header-overflow-trigger").on('click',function(){
       if($(".main-container").hasClass("open-overflow-menu")){
         $(".main-container").removeClass("open-overflow-menu");
       }else{
         $(".main-container").addClass("open-overflow-menu");
       }
     });
  </script>
  <!-- Disqus Comments -->
  
    <script type="text/javascript">
        var disqus_shortname = 'sajaldebnath';
        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>
  

</body>
</html>
