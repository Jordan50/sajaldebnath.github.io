
<!DOCTYPE html>
<html lang="en-US">
<!-- Including the Head tag and metadata -->


<head>
  <!--Meta-->
    <meta charset="UTF-8">
    <title>vSphere Capacity Report-Anything Virtual and Cloudy</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=5.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Here you will find posts on various VMware and other technologies including but not limited to vRealize Suite, NSX, VSAN, PowerCLI, Python, and DevOps. A special focus is on vRA, vROps and vRO">
    <meta name="author" content="Sajal Debnath">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/css/clr-ui.min.css">
    <style>
      .responsive {
        max-width: 100%;
        height: auto;
      }
      .video-container {
        position: relative;
        padding-bottom: 56.25%;
        padding-top: 30px; height: 0; overflow: hidden;
      }
      .video-container iframe,
      .video-container object,
      .video-container embed {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


<body>
<!--  <main> body starts from here-->
  <clr-main-container class="main-container">
    <div class="alert alert-app-level alert-warning">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-text">
                    Just moved to Hexo + VMware Clarity combination. This site is not fully working in Firefox. Try IE/Chrome/Safari Browsers instead.
                </div>
            </div>
        </div>
    </div>
    <!-- Blog Header Navigation and Subnav menus -->
    
<!-- <header class="header header-4"> -->

<clr-header class="header-4 header">
  <!---->
  <button class="header-hamburger-trigger" type="button" aria-label="HeaderMenu">
    <span></span>
  </button>
  <div class="branding">
      <a class="logo-and-title" href="/" >
          <span><img SRC="/images/logo.png" ALT="Logo" WIDTH=36 HEIGHT=36></img></span>
          <span class="title">Anything Virtual and Cloudy</span>
      </a>
  </div>
  <div class="divider"></div>
  <ul class="header-nav list-unstyled clr-nav-level-1">
    <li class="nav-item">
      <a href="/" class="nav-link nav-text">Home</a>
    </li>
      <!---->
      <li class="nav-item">
        <a href="/about/" class="nav-link nav-text">About</a>
      </li>
        <!---->
      <li class="nav-item">
        <a href="/contact/" class="nav-link nav-text">Contact</a>
      <li>
      <li class="nav-item">
        <a href="/archives/" class="nav-link nav-text">Archives</a>
      <li>
        <!---->
  </ul>
  <!---->
  <button class="header-overflow-trigger ng-star-inserted" type="button" aria-label="SubnavMenu">
    <span></span>
  </button>
    <div class="header-backdrop"></div>
</clr-header>

    <!-- -->
<nav class="subnav clr-nav-level-2">

    <ul class="nav">
      <li class="nav-item">
        <div class="dropdown">
          <button type="button" class="dropdown-toggle btn btn-sm btn-info-outline" title="Click for Dropdown">
              vRealize Suite
          </button>
          <div class="dropdown-menu">
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/vRealize-Suite/vRealize-Automation">vRealize Automation</a></button>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/vRealize-Suite/vRealize-Operations">vRealize Operations</a></button>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/vRealize-Suite/vRealize-Orchestrator">vRealize Orchestrator</a></button>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/vRealize-Suite/vRealize-Code-Stream">vRealize Code Stream</a></button>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/vRealize-Suite/vRealize-LogInsight">vRealize LogInsight</a></button>
          </div>
        </div>
      </li>
      <li class="nav-item">
        <div class="dropdown">
          <button type="button" class="dropdown-toggle btn btn-sm title="Click for Dropdown" btn-info-outline">
            Scripting
          </button>
          <div class="dropdown-menu">
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/Automation-and-Scripting/PowerCLI">PowerCLI</a></button>
            <div class="dropdown-divider"></div>
            <button type="button" class="dropdown-item"><a class="nav-link" href="/categories/Automation-and-Scripting/Python">Python</a></button>
          </div>
        </div>
      </li>

        <li class="nav-item">
            <a class="nav-link" href="/categories/NSX">NSX</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/categories/DevOps">DevOps</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/categories/VSAN">VSAN</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/categories/General">General</a>
        </li>
    </ul>
</nav>


    <!-- Content container starts from here-->
    <!-- Dividing the content area into two different part. First part will Show
      Post and Page related information. Right side will have widgets -->
    <div class="content-container">
      <div class="content-area">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9">
                <div class="card">
     <div class="card-header">
         <h3 class="card-title" >
           vSphere Capacity Report
         </h3>
     </div>
     <div class="card-block">
    
     <div class="alert alert-warning">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-text">
                  


Related Categories: <a href="/categories/Automation-and-Scripting/">#Automation and Scripting</a> <a href="/categories/Automation-and-Scripting/PowerCLI/">#PowerCLI</a> &nbsp &nbsp &nbsp &nbsp <img border="0" alt="Info-Standard" src="/calendar-line.svg" width="18" height="18"></img> 2015-09-29



                </div>
            </div>
        </div>
     </div>
     
     <div class="card-text">
     <!-- Content -->
         <h4 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a>Purpose</h4><p>If you are an admin who manages a vSphere environment then you are in the right place. How many times did you wish for a report that would give you a holistic view of capacity of your environment? Well, I know you can get that from vRealize Operations Manager, but what about a simple script which can give you similar information but in more compact form.<br><a id="more"></a><br>Imagine logging in to your system in the morning and opening a HTML report which gives you at a<br>glance information of your environment. This script does exactly that.</p>
<h4 id="What-exactly-does-it-do"><a href="#What-exactly-does-it-do" class="headerlink" title="What exactly does it do?"></a>What exactly does it do?</h4><p>This is a script which generates a HTML report on overall capacity of a vSphere environment. For example, it can tell you what is the total available physical cores in your environment. What is the allocated vCPU and Used vCPU in your environment. Similar information for memory of the environment is also available. It will also tell you the total number of VM’s in the environment. At the end it gives you view of all the datastores. The script gives you a close approximation of the resources, since it does not calculate the memory overhead of the VM’s or memory required by the hypervisor, so it is not an exact value, but would give you fair idea about your environment capacity. The best part of this script is, it breaks down the information from overall capacity to Cluster level to Host level. So that you can get a fair idea of the environment.</p>
<h4 id="How-does-it-work"><a href="#How-does-it-work" class="headerlink" title="How does it work?"></a>How does it work?</h4><p>This is a plain PowerShell script which you can run manually or schedule it in Windows Scheduler. There is a single script Get-Capacity.ps1 which when run will generate the report for the environment. To run the script, follow the following format: </p>
<pre class=" language-powershell"><code class="language-powershell">
Get<span class="token operator">-</span>Capacity <span class="token operator">-</span>vcenter &lt;vcenter> <span class="token operator">-</span>vcuser &lt;vcenter user=<span class="token string">""</span>> <span class="token operator">-</span>vcpassword &lt;vcenter password=<span class="token string">""</span>> <span class="token operator">-</span>consolidation &lt;cpu consolidation=<span class="token string">""</span> ratio=<span class="token string">""</span>>
&lt;<span class="token operator">/</span>cpu>&lt;<span class="token operator">/</span>vcenter>&lt;<span class="token operator">/</span>vcenter>&lt;<span class="token operator">/</span>vcenter></code></pre>

<p>Note the Consolidation parameter. Depending on the number of available physical cores, the script calculates Available vCPU count. This count is generated based on the CPU consolidation ratio that you want for your environment.</p>
<h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h4><p>A sample output is shown below.</p>
<p><img src="/images/2015/09/ScreenShot2015-09-29at5.03.53PM.png" alt="vSphere Capacity Report" class="responsive"></p>
<p>vSphere Capacity Report</p>
<h4 id="Areas-of-Improvement"><a href="#Areas-of-Improvement" class="headerlink" title="Areas of Improvement:"></a>Areas of Improvement:</h4><p>This is the first cut of the script and I plan to improve the following areas.</p>
<ul>
<li>Create a front end form where users will be able to choose the Clusters on which the Capacity test will be done</li>
<li>Create separate functions for calculating capacity at different layers</li>
<li>Create separate function to get the HTML output</li>
<li>Create more proper Verbose and Debug output</li>
<li>Create more detailed logging</li>
<li>Take input from credential file</li>
</ul>
<p>Also I plan to collaborate with my reader and take inputs for them. This script is more of educational value than practical value. So I want my readers to work on this and provide suggestions.</p>
<h4 id="Where-to-get-it"><a href="#Where-to-get-it" class="headerlink" title="Where to get it?"></a>Where to get it?</h4><p>You can download the main script as well as the sample HTML file from the GitHub repository at <a href="https://github.com/sajaldebnath/vsphere-capacity-report" target="_blank" rel="noopener">https://github.com/sajaldebnath/vsphere-capacity-report</a> . So let’s start!!!!!!!!!!!!!!</p>

     </div>
     </div>
        <div class="card-footer">
            <b>Share this Post &emsp; </b>

            
<a class="card-link" href="http://www.facebook.com/sharer.php?u=https://sajaldebnath.com/vsphere-capacity-report.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Facebook" src="/007-facebook.png" width="25" height="25"></img>
</a>
<a class="card-link" href="http://www.linkedin.com/shareArticle?mini=true&url=https://sajaldebnath.com/vsphere-capacity-report.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="LinkedIn" src="/005-linkedin.png" width="25" height="25"></img>
</a>
<a class="card-link" href="http://twitter.com/intent/tweet?text=An%20intersting%20blog&url=https://sajaldebnath.com/vsphere-capacity-report.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Twitter" src="/006-twitter.png" width="25" height="25"></img>
</a>
<a class="card-link" href="https://plus.google.com/share?url=https://sajaldebnath.com/vsphere-capacity-report.html" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
  <img border="0" alt="Goolge+" src="/003-google-plus.png" width="25" height="25"></img>
</a>


        </div>
    </div>

<!-- Comments Section -->

<section class="comments">
  <div class="card">
    <div class="card-header">
      <b>Comments</b>
    </div>
    <div class="card-block">
      <div class="card-text">
        
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>


      </div>
    </div>
  </div>
</section>


   <!-- Shows the data for the page or posts -->
          </div>
          <!-- Widgets Area -->
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-3">
            <div>
              <!-- Search Area -->
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
  <div class="card-header">
    <b>Search the Site</b>
  </div>
  <div class="card-block">
    <div class="card-text">
      <script>
        (function() {
          var cx = '013858032712959220653:01en0zgxnjq';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <gcse:search></gcse:search>
    </div>
  </div>
</div>
                </div>
              </div>
              <!-- Socials Area -->
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
  <div class="card-header">
    <b>Follow me on Social Media</b>
  </div>
  <div class="card-block">
    <div class="card-text">
      <a href="https://www.facebook.com/sajal.debnath" class="nav-link nav-text" target="_blank" rel="noopener" >
          <img border="0" alt="Facebook" src="/007-facebook.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://twitter.com/sajal_debnath" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="Twitter" src="/006-twitter.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://in.linkedin.com/in/sajaldebnath" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="LinkedIn" src="/005-linkedin.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://www.youtube.com/user/vmunix1234" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="Youtube" src="/004-youtube.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://plus.google.com/+SajalDebnath" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="Goolge+" src="/003-google-plus.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://github.com/sajaldebnath" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="Github" src="/002-github.png" width="25" height="25"></img>
      </a>
      &emsp;
      <a href="https://sajaldebnath.github.io/atom.xml" class="nav-link nav-text" target="_blank" rel="noopener">
          <img border="0" alt="RSS" src="/001-rss.png" width="25" height="25"></img>
      </a>
    </div>
  </div>
</div>

                </div>
              </div>
              <!-- Latest Posts Area -->
              <div class="row">
                <div class="col-lg-12">
                  
<div class="card">
  <div class="card-header">
    <b>Latest Posts</b>
  </div>
  <div class="card-block">
    <div class="card-text">
      <ul class="list">
        
          <li>
            <a href="auto-scaling-deep-dive.html">Auto-Scaling Deep Dive</a>
          </li>
        
          <li>
            <a href="journey-from-wordpress-to-hexo-and-clarity.html">Journey from Wordpress to Hexo and Clarity</a>
          </li>
        
          <li>
            <a href="oracle-weblogic-as-a-service-for-vrealize-automation.html">Oracle Weblogic-as-a-Service for vRealize Automation</a>
          </li>
        
          <li>
            <a href="vmworld-report-from-the-field.html">VMworld report from the field</a>
          </li>
        
          <li>
            <a href="how-to-manually-edit-vrealize-automation-vpostgres-database.html">How to manually edit vRealize Automation vPostgres database</a>
          </li>
        
      </ul>
    </div>
  </div>
</div>

                </div>
              </div>
              <!-- Tags Area -->
              <div class="row">
                <div class="col-lg-12">
                  <div class="card">
  <div class="card-header">
    <b>Post Tags</b>
  </div>
  <div class="card-block">
    <div class="card-text">
      <ul class="list-unstyled">
        <span class="label label-warning">
          <a href="/tags/Automation/">Automation</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-Suite">vRealize Suite</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-Automation">vRealize Automation</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-Operations">vRealize Operations</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-Orchestrator">vRealize Orchestrator</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-Code-Stream">vRealize Code Stream</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/vRealize-LogInsight">vRealize LogInsight</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/PowerCLI">PowerCLI</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/Python">Python</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/NSX">NSX</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/DevOps">DevOps</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/VSAN">VSAN</a>
        </span>
        <span class="label label-warning">
          <a href="/tags/General">General</a>
        </span>
      </ul>
    </div>
  </div>
</div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </clr-main-container>

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84051711-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84051711-1');
  gtag('set', {'user_id': 'UA-84051711-1'}); // Set the user ID using signed-in user_id.
</script>

  <!-- Including the Scripts Area -->
  <script src="/js/jquery-3.3.1.slim.min.js" async></script>
  <script>window.jQuery || document.write('<script src="/js/jquery-3.3.1.slim.min.js"><\/script>')</script>

  <noscript>
    Sorry...JavaScript is needed to go ahead.
  </noscript>

  <!-- Defining the scripts -->
  <script type="text/javascript">

    // Handling the main header menubar options in Responsive mode
    $(".header-hamburger-trigger").on('click',function(){
      if($(".main-container").hasClass("open-hamburger-menu")){
        $(".main-container").removeClass("open-hamburger-menu");
      }else{
      $(".main-container").addClass("open-hamburger-menu");
    }
    });

    // Handling the Subnav menubar options in Responsive mode
    $(".header-overflow-trigger").on('click',function(){
      if($(".main-container").hasClass("open-overflow-menu")){
        $(".main-container").removeClass("open-overflow-menu");
      }else{
        $(".main-container").addClass("open-overflow-menu");
      }
    });

  </script>
  <!-- Disqus Comments -->
  
    <script type="text/javascript">
        var disqus_shortname = 'sajaldebnath';
        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>
  

  <script type="text/javascript">

    // The following function provides the active class to header items
    //Separate Section
    // The following two functions creates the dropdown in Subnav

    $(".dropdown").on('click',function(){
      if($(".dropdown").hasClass("open")){
        $(".dropdown").removeClass("open");
        $(this).addClass("open");
      }else{
      $(this).addClass("open");
      }
    });

    // Close the dropdown menu if the user clicks outside of it
    document.onclick = function myClickHandler(event) {
      if (!event.target.matches('.dropdown-toggle')) {
          $(".dropdown").removeClass("open");
      }
    }
  </script>

</body>
</html>
